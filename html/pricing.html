<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>AX2 | 크레딧 충전 및 요금제</title>
    <link rel="icon" type="image/png" href="../assets/image/AX.png">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .pricing-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .pricing-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .pricing-title {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .pricing-subtitle {
            font-size: 18px;
            color: var(--text-light);
        }

        /* 크레딧 잔액 표시 */
        .credit-balance-section {
            background: white;
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 40px;
            border: 1px solid #D1D5DB;
            text-align: center;
        }

        .credit-balance-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 12px;
        }

        .credit-balance-amount {
            font-size: 48px;
            font-weight: 700;
            color: #8B5CF6;
            margin-bottom: 8px;
        }

        .credit-balance-unit {
            font-size: 24px;
            color: #1a1a2e;
            font-weight: 600;
        }

        .credit-usage-info {
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid #E5E7EB;
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }

        .credit-usage-item {
            text-align: center;
        }

        .credit-usage-label {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
        }

        .credit-usage-value {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a2e;
        }

        /* 크레딧 패키지 그리드 */
        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .pricing-card {
            background: white;
            border-radius: 16px;
            padding: 32px 24px;
            border: 1px solid #E5E7EB;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .pricing-card:hover {
            border-color: #8B5CF6;
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.15);
            transform: translateY(-4px);
        }

        .pricing-card.popular {
            border: 2px solid #8B5CF6;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.15);
        }

        .pricing-card.popular::before {
            display: none;
        }

        .pricing-card-badge {
            position: absolute;
            top: -14px;
            left: 24px;
            background: #EF4444;
            color: white;
            font-size: 13px;
            font-weight: 700;
            padding: 6px 14px;
            border-radius: 12px;
            z-index: 1;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        .pricing-card-badge.popular {
            top: -14px;
            left: auto;
            right: 24px;
            background: #8B5CF6;
            color: white;
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }

        .pricing-card-title {
            font-size: 25px;
            font-weight: 700;
            margin-bottom: 8px;
            text-align: center;
            color: #1a1a2e;
        }

        .pricing-card-description {
            font-size: 14px;
            color: #64748B;
            line-height: 1.6;
            margin-top: 0;
            margin-bottom: 24px;
            text-align: center;
            min-height: 40px;
        }

        .pricing-card-description .duration-number {
            font-weight: 700;
            color: #1a1a2e;
            font-size: 16px;
        }

        .pricing-card-credit {
            font-size: 36px;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 8px;
            text-align: center;
            margin-top: auto;
        }

        .pricing-card-credit .credit-unit {
            font-size: 18px;
            font-weight: 400;
        }

        .pricing-card-price {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            margin-bottom: 16px;
        }

        .pricing-card-price-row {
            display: flex;
            flex-direction: row;
            align-items: baseline;
            justify-content: center;
            gap: 8px;
        }

        .pricing-card-original-price {
            font-size: 18px;
            font-weight: 400;
            color: #9CA3AF;
            text-decoration: line-through;
        }

        .pricing-card-discounted-price {
            font-size: 32px;
            font-weight: 700;
            color: #EF4444;
            line-height: 1.2;
        }

        .pricing-card-discount-label {
            font-size: 13px;
            color: #9CA3AF;
            font-weight: 500;
        }

        .pricing-card-price .price-unit {
            font-size: 20px;
            font-weight: 400;
        }

        .pricing-card-bonus {
            font-size: 13px;
            color: #8B5CF6;
            font-weight: 600;
            text-align: center;
            margin-bottom: 16px;
        }

        .pricing-card-savings {
            font-size: 14px;
            color: #EF4444;
            font-weight: 600;
            text-align: center;
            margin-bottom: 8px;
            padding: 4px 12px;
            background: #FEF2F2;
            border-radius: 6px;
            display: inline-block;
        }

        .pricing-card-button {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: auto;
            background: #8B5CF6;
            color: white;
            min-height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pricing-card-button:hover {
            background: #7C3AED;
        }

        .pricing-card-button-note {
            font-size: 12px;
            color: #64748B;
            text-align: center;
            margin-top: 4px;
        }



        /* 크레딧 사용 안내 */
        .credit-info-box {
            background: #F9FAFB;
            border-radius: 12px;
            padding: 24px;
            margin-top: 40px;
            border: 1px solid #E5E7EB;
        }

        .credit-info-title {
            font-size: 16px;
            font-weight: 600;
            color: #1a1a2e;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .credit-info-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .credit-info-list li {
            font-size: 14px;
            color: #666;
            line-height: 1.8;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .credit-info-list li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: #8B5CF6;
            font-weight: bold;
        }

        .credit-info-list li.section-title {
            padding-left: 0;
            margin-top: 16px;
            margin-bottom: 8px;
        }

        .credit-info-list li.section-title:first-child {
            margin-top: 0;
        }

        .credit-info-list li.section-title::before {
            display: none;
        }

        .credit-info-list li.section-title strong {
            font-size: 15px;
            color: #1a1a2e;
            font-weight: 600;
            display: block;
        }

        /* FAQ/문의/저작권 카드 섹션 */
        .info-cards-section {
            display: flex;
            gap: 20px;
            margin-top: 40px;
        }

        .info-card {
            flex: 1;
            background: white;
            border: 1px solid #E5E7EB;
            border-radius: 12px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: block;
            color: inherit;
        }

        .info-card:hover {
            border-color: #8B5CF6;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.1);
        }

        .info-card-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .info-card-text {
            flex: 1;
        }

        .info-card-title {
            font-size: 16px;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 8px;
        }

        .info-card-description {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
        }

        .info-card-icon {
            font-size: 24px;
            color: #666;
            margin-left: 16px;
        }

        /* 결제 모달 스타일 */
        .payment-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .payment-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* 결제 모달이 열려있을 때 상단바 숨기기 */
        body.payment-modal-open #nav-placeholder,
        body.payment-modal-open .glass-nav {
            display: none !important;
        }

        .payment-modal {
            background: white;
            width: 100%;
            max-width: 900px;
            max-height: 85vh;
            height: auto;
            overflow: hidden;
            border-radius: 24px;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
        }

        .payment-modal-overlay.active .payment-modal {
            transform: translateY(0);
        }

        .payment-modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid #E5E7EB;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            background: white;
            z-index: 1;
            border-radius: 24px 24px 0 0;
        }

        .payment-modal-title {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a2e;
        }

        .payment-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #666;
            transition: all 0.2s ease;
            z-index: 10;
        }

        .payment-modal-close:hover {
            color: #1a1a2e;
        }

        .payment-modal-body {
            padding: 0;
            display: flex;
            flex-direction: row;
            flex: 1;
            overflow: hidden;
            min-height: 0;
            max-height: calc(85vh - 60px);
        }

        .payment-methods-container {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            overflow-x: hidden;
            border-right: 1px solid #E5E7EB;
            background: white;
            min-height: 0;
            display: flex;
            flex-direction: column;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }

        .payment-methods-container::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .payment-main-title {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a2e;
            margin-bottom: 24px;
        }

        .payment-summary-container {
            width: 320px;
            flex-shrink: 0;
            padding: 24px;
            background: #F9FAFB;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow-y: auto;
            overflow-x: hidden;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }

        .payment-summary-container::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .payment-summary-container > div:first-of-type {
            margin-top: 0;
        }

        .payment-summary-title {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a2e;
            margin-bottom: 24px;
            margin-top: 8px;
        }

        .payment-summary-item {
            margin-bottom: 16px;
        }

        .payment-summary-label {
            font-size: 15px;
            color: #999;
            margin-bottom: 6px;
        }

        .payment-summary-value {
            font-size: 16px;
            font-weight: 600;
            color: #1a1a2e;
            line-height: 1.4;
        }

        .payment-summary-amount {
            font-size: 24px;
            font-weight: 700;
            color: #1a1a2e;
            margin-top: 4px;
        }

        .payment-section {
            margin-bottom: 24px;
        }

        .payment-section-title {
            font-size: 16px;
            font-weight: 600;
            color: #999;
            margin-bottom: 12px;
        }

        .payment-main-title {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a2e;
            margin-bottom: 24px;
        }

        .payment-more-link {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            color: #666;
            font-size: 14px;
            margin-top: 16px;
            cursor: pointer;
            text-decoration: none;
        }

        .payment-more-link:hover {
            color: #8B5CF6;
        }

        .selected-plan-box {
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            padding: 20px;
            background: #F9FAFB;
        }

        .selected-plan-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .selected-plan-name {
            font-size: 16px;
            font-weight: 600;
            color: #8B5CF6;
        }

        .selected-plan-price {
            font-size: 20px;
            font-weight: 700;
            color: #1a1a2e;
        }

        .selected-plan-price .unit {
            font-size: 14px;
            font-weight: 400;
        }

        .plan-notice {
            font-size: 13px;
            color: #666;
            line-height: 1.6;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 8px;
        }

        .payment-methods.cards {
            grid-template-columns: repeat(3, 1fr);
        }

        .payment-methods.cards .payment-method-btn {
            min-height: 80px;
            padding: 12px 8px;
            gap: 6px;
        }

        .payment-method-btn {
            padding: 16px 12px;
            border: 1px solid #E5E7EB;
            border-radius: 16px;
            background: white;
            font-size: 14px;
            color: #1a1a2e;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 100px;
            width: 100%;
            height: auto;
        }

        .payment-method-btn:hover {
            border-color: #8B5CF6;
            box-shadow: 0 2px 12px rgba(139, 92, 246, 0.12);
        }

        .payment-method-btn.active {
            border-color: #8B5CF6;
            background: #F3F4F6;
            box-shadow: 0 2px 12px rgba(139, 92, 246, 0.15);
        }

        .payment-method-btn i {
            font-size: 32px;
            color: #8B5CF6;
        }

        .payment-method-btn span {
            font-size: 13px;
            font-weight: 500;
            margin-top: 4px;
        }

        .payment-method-logo {
            width: 60px;
            height: 32px;
            object-fit: contain;
            margin-bottom: 4px;
        }

        .npay-icon {
            background: #03C75A;
            color: white;
            font-size: 9px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .kakaopay-icon {
            background: #FFE500;
            color: #3C1E1E;
            font-size: 9px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .payment-form-group {
            margin-bottom: 20px;
        }

        .payment-form-label {
            display: block;
            font-size: 14px;
            color: #1a1a2e;
            margin-bottom: 8px;
        }

        .payment-form-label .required {
            color: #EF4444;
        }

        .payment-form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            font-size: 14px;
            color: #1a1a2e;
            transition: border-color 0.2s ease;
            box-sizing: border-box;
        }

        .payment-form-input:focus {
            outline: none;
            border-color: #8B5CF6;
        }

        .payment-form-input::placeholder {
            color: #9CA3AF;
        }

        .phone-inputs {
            display: flex;
            gap: 8px;
        }

        .phone-inputs .payment-form-input {
            flex: 1;
            text-align: center;
        }

        .terms-box {
            background: white;
            border-radius: 8px;
            padding: 16px;
            font-size: 12px;
            color: #666;
            line-height: 1.8;
        }

        .terms-box strong {
            font-size: 13px;
            font-weight: 600;
            color: #1a1a2e;
            display: block;
            margin-bottom: 8px;
        }

        .terms-box a {
            color: #8B5CF6;
            text-decoration: underline;
        }

        .terms-agreement {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 20px;
            font-size: 14px;
            color: #666;
        }

        .terms-agreement input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .payment-modal-footer {
            padding: 0 24px 24px;
        }

        .payment-submit-btn {
            width: 100%;
            padding: 18px;
            background: #1a1a2e;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .payment-submit-btn:hover {
            background: #2d2d44;
        }

        .payment-submit-btn:disabled {
            background: #E5E7EB;
            color: #9CA3AF;
            cursor: not-allowed;
        }

        .payment-submit-btn:disabled:hover {
            background: #E5E7EB;
        }

        /* 결제 완료 모달 */
        .payment-success-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .payment-success-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .payment-success-modal {
            background: white;
            border-radius: 24px;
            width: 90%;
            max-width: 400px;
            padding: 40px 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .payment-success-modal-overlay.active .payment-success-modal {
            transform: scale(1);
        }

        .payment-success-content {
            text-align: center;
        }

        .payment-success-icon {
            font-size: 64px;
            color: #10B981;
            margin-bottom: 20px;
        }

        .payment-success-content h2 {
            font-size: 24px;
            font-weight: 600;
            color: #1a1a2e;
            margin-bottom: 30px;
        }

        .payment-success-info {
            background: #F9FAFB;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .success-info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #E5E7EB;
        }

        .success-info-item:last-child {
            border-bottom: none;
        }

        .success-info-label {
            font-size: 14px;
            color: #666;
        }

        .success-info-value {
            font-size: 16px;
            font-weight: 600;
            color: #1a1a2e;
        }

        .payment-success-btn {
            width: 100%;
            padding: 16px;
            background: #8B5CF6;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .payment-success-btn:hover {
            background: #7C3AED;
        }

        @media (max-width: 900px) {
            .payment-modal-body {
                flex-direction: column;
            }

            .payment-methods-container {
                border-right: none;
                border-bottom: 1px solid #E5E7EB;
            }

            .payment-summary-container {
                width: 100%;
            }
        }

        @media (max-width: 600px) {
            .payment-modal {
                margin: 10px;
                height: calc(100vh - 20px);
                max-height: calc(100vh - 20px);
            }

            .payment-methods {
                grid-template-columns: repeat(2, 1fr);
            }

            .payment-methods.cards {
                grid-template-columns: repeat(2, 1fr);
            }

            .payment-method-btn {
                min-height: 80px;
                padding: 16px;
            }
        }

        @media (max-width: 768px) {
            .pricing-container {
                padding: 40px 15px;
            }

            .pricing-title {
                font-size: 24px;
            }

            .pricing-subtitle {
                font-size: 16px;
            }

            .pricing-grid {
                grid-template-columns: 1fr;
            }

            .credit-balance-amount {
                font-size: 36px;
            }

            .credit-usage-info {
                gap: 20px;
            }

            .info-cards-section {
                flex-direction: column;
                gap: 16px;
            }

            .info-card {
                padding: 20px;
            }

        }
    </style>
</head>
<body>
    <!-- 네비게이션 바 플레이스홀더 -->
    <div id="nav-placeholder"></div>

    <!-- 메인 컨텐츠 -->
    <main class="main-container">
        <div class="pricing-container">
            <div class="pricing-header">
                <h1 class="pricing-title">크레딧 충전</h1>
                <p class="pricing-subtitle">필요한 만큼만 충전하고 사용하세요</p>
            </div>

            <!-- 크레딧 잔액 표시 -->
            <div class="credit-balance-section">
                <div class="credit-balance-label">보유 크레딧</div>
                <div class="credit-balance-amount">
                    <span id="credit-balance">0</span>
                    <span class="credit-balance-unit">크레딧</span>
                </div>
                <div class="credit-usage-info">
                    <div class="credit-usage-item">
                        <div class="credit-usage-label">이번 달 사용</div>
                        <div class="credit-usage-value" id="monthly-usage">0 크레딧</div>
                    </div>
                    <div class="credit-usage-item">
                        <div class="credit-usage-label">총 충전</div>
                        <div class="credit-usage-value" id="total-charged">0 크레딧</div>
                    </div>
                </div>
            </div>

            <!-- 크레딧 패키지 -->
            <div class="pricing-grid" id="credit-packages">
                <!-- 크레딧 패키지들이 여기에 동적으로 추가됩니다 -->
            </div>

            <!-- 크레딧 사용 안내 -->
            <div class="credit-info-box">
                <div class="credit-info-title">
                    <i class="fas fa-info-circle" style="color: #8B5CF6;"></i>
                    크레딧 사용 안내
                </div>
                <ul class="credit-info-list">
                    <li class="section-title"><strong>크레딧 사용 기준</strong></li>
                    <li>기본 자막 생성: 1분당 10 크레딧</li>
                    <li>번역 언어 추가: 1분당 5 크레딧 (언어당)</li>
                    <li class="section-title"><strong>사용 예시</strong></li>
                    <li>10분 영상 + 기본 자막만: 100 크레딧</li>
                    <li>10분 영상 + 기본 자막 + 영어 번역: 150 크레딧 (100 + 50)</li>
                    <li>10분 영상 + 기본 자막 + 영어/일본어 번역: 200 크레딧 (100 + 50 + 50)</li>
                    <li class="section-title"><strong>유의사항</strong></li>
                    <li>영상 길이는 분 단위로 올림 처리됩니다 (예: 61초 → 2분으로 계산)</li>
                    <li>크레딧은 구매일로부터 1년간 유효합니다</li>
                    <li>미사용 크레딧은 자동으로 환불되지 않습니다</li>
                    <li>크레딧 사용 내역은 마이페이지에서 확인할 수 있습니다</li>
                </ul>
            </div>

            <!-- FAQ/문의/저작권 카드 섹션 -->
            <div class="info-cards-section">
                <a href="faq.html" class="info-card">
                    <div class="info-card-content">
                        <div class="info-card-text">
                            <div class="info-card-title">FAQ</div>
                            <div class="info-card-description">결제 관련 궁금한 사항이 있으세요?</div>
                        </div>
                        <div class="info-card-icon">
                            <i class="fas fa-comment-dots"></i>
                        </div>
                    </div>
                </a>
                <a href="https://www.4csoft.com/inquiry/index.html" class="info-card">
                    <div class="info-card-content">
                        <div class="info-card-text">
                            <div class="info-card-title">1:1 문의</div>
                            <div class="info-card-description">문의 주시면 신속히 답변드리겠습니다.</div>
                        </div>
                        <div class="info-card-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                    </div>
                </a>
                <a href="security.html" class="info-card">
                    <div class="info-card-content">
                        <div class="info-card-text">
                            <div class="info-card-title">저작권 규정</div>
                            <div class="info-card-description">반드시 알아야 할 AX2 저작권</div>
                        </div>
                        <div class="info-card-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                    </div>
                </a>
            </div>

        </div>
    </main>

    <!-- 결제 모달 -->
    <div class="payment-modal-overlay" id="payment-modal-overlay">
        <div class="payment-modal">
            <button class="payment-modal-close" onclick="closePaymentModal()">
                <i class="fas fa-times"></i>
            </button>
            <div class="payment-modal-body">
                <!-- 왼쪽: 결제 방법 선택 -->
                <div class="payment-methods-container">
                    <div class="payment-main-title">결제 방법을 선택해주세요</div>
                    
                    <!-- 간편결제 -->
                    <div class="payment-section">
                        <div class="payment-section-title" style="font-size: 16px; margin-bottom: 12px;">간편결제</div>
                        <div class="payment-methods">
                            <button class="payment-method-btn" data-method="kakaopay">
                                <div style="width: 80px; height: 50px; display: flex; align-items: center; justify-content: center;">
                                    <img src="../assets/image/kakaopay.png" alt="카카오페이" style="max-width: 80px; max-height: 50px; object-fit: contain;">
                                </div>
                                카카오페이
                            </button>
                            <button class="payment-method-btn" data-method="npay">
                                <div style="width: 80px; height: 50px; display: flex; align-items: center; justify-content: center;">
                                    <img src="../assets/image/npay.png" alt="네이버페이" style="max-width: 80px; max-height: 50px; object-fit: contain;">
                                </div>
                                네이버페이
                            </button>
                            <button class="payment-method-btn" data-method="toss">
                                <div style="width: 80px; height: 50px; display: flex; align-items: center; justify-content: center;">
                                    <img src="../assets/image/tosspay.png" alt="토스페이" style="max-width: 80px; max-height: 50px; object-fit: contain;">
                                </div>
                                토스페이
                            </button>
                            <button class="payment-method-btn payment-method-more" data-method="samsung" style="display: none;">
                                <div style="width: 80px; height: 50px; display: flex; align-items: center; justify-content: center;">
                                    <img src="../assets/image/samsungpay.png" alt="삼성페이" style="max-width: 80px; max-height: 50px; object-fit: contain;">
                                </div>
                                삼성페이
                            </button>
                            <button class="payment-method-btn payment-method-more" data-method="payco" style="display: none;">
                                <div style="width: 80px; height: 50px; display: flex; align-items: center; justify-content: center;">
                                    <img src="../assets/image/PAYCO.png" alt="페이코" style="max-width: 80px; max-height: 50px; object-fit: contain;">
                                </div>
                                페이코
                            </button>
                            <button class="payment-method-btn payment-method-more" data-method="ssg" style="display: none;">
                                <div style="width: 80px; height: 50px; display: flex; align-items: center; justify-content: center;">
                                    <img src="../assets/image/SSGPAY.png" alt="SSG페이" style="max-width: 80px; max-height: 50px; object-fit: contain;">
                                </div>
                                SSG페이
                            </button>
                        </div>
                        <a href="#" class="payment-more-link" id="easy-payment-more" onclick="toggleEasyPaymentMore(event)">
                            더 보기 <i class="fas fa-chevron-down"></i>
                        </a>
                    </div>

                    <!-- 신용·체크카드 -->
                    <div class="payment-section">
                        <div class="payment-section-title" style="font-size: 16px; margin-bottom: 12px;">신용·체크카드</div>
                        <div class="payment-methods cards">
                            <button class="payment-method-btn" data-method="shinhan">
                                <img src="../assets/image/shinhancard.png" alt="신한카드" style="width: 120px; height: 65px; object-fit: contain;">
                                신한카드
                            </button>
                            <button class="payment-method-btn" data-method="hyundai">
                                <img src="../assets/image/hyundaicard.png" alt="현대카드" style="width: 120px; height: 65px; object-fit: contain;">
                                현대카드
                            </button>
                            <button class="payment-method-btn" data-method="samsung-card">
                                <img src="../assets/image/samsungcard.png" alt="삼성카드" style="width: 140px; height: 75px; object-fit: contain;">
                                삼성카드
                            </button>
                            <button class="payment-method-btn" data-method="lotte">
                                <img src="../assets/image/LOTTECARD.png" alt="롯데카드" style="width: 120px; height: 65px; object-fit: contain;">
                                롯데카드
                            </button>
                            <button class="payment-method-btn" data-method="toss-bank">
                                <img src="../assets/image/tossbank.png" alt="토스뱅크" style="width: 120px; height: 65px; object-fit: contain;">
                                토스뱅크
                            </button>
                            <button class="payment-method-btn" data-method="kb">
                                <img src="../assets/image/KB.png" alt="KB국민카드" style="width: 90px; height: 50px; object-fit: contain;">
                                KB국민카드
                            </button>
                            <button class="payment-method-btn" data-method="bc">
                                <img src="../assets/image/BC.png" alt="BC카드" style="width: 90px; height: 50px; object-fit: contain;">
                                BC카드
                            </button>
                            <button class="payment-method-btn" data-method="woori">
                                <img src="../assets/image/WooriBank.png" alt="우리카드" style="width: 120px; height: 65px; object-fit: contain;">
                                우리카드
                            </button>
                            <button class="payment-method-btn" data-method="nh">
                                <img src="../assets/image/NH.png" alt="NH농협카드" style="width: 90px; height: 50px; object-fit: contain;">
                                NH농협카드
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="citi" style="display: none;">
                                <img src="../assets/image/citi.png" alt="씨티카드" style="width: 120px; height: 65px; object-fit: contain;">
                                씨티카드
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="hana-card" style="display: none;">
                                <img src="../assets/image/hanacard.png" alt="하나카드" style="width: 120px; height: 65px; object-fit: contain;">
                                하나카드
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="kakaobank" style="display: none;">
                                <img src="../assets/image/KakaoBank.jpg" alt="카카오뱅크" style="width: 90px; height: 50px; object-fit: contain;">
                                카카오뱅크
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="kbank" style="display: none;">
                                <img src="../assets/image/kbank.png" alt="케이뱅크" style="width: 90px; height: 50px; object-fit: contain;">
                                케이뱅크
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="ibk" style="display: none;">
                                <img src="../assets/image/IBK.png" alt="IBK기업은행" style="width: 120px; height: 65px; object-fit: contain;">
                                IBK기업은행
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="kdb" style="display: none;">
                                <img src="../assets/image/KDB.png" alt="KDB산업은행" style="width: 120px; height: 65px; object-fit: contain;">
                                KDB산업은행
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="suhyup" style="display: none;">
                                <img src="../assets/image/CreditUnion.png" alt="수협은행" style="width: 120px; height: 65px; object-fit: contain;">
                                수협은행
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="daegu" style="display: none;">
                                <img src="../assets/image/DGB.png" alt="대구은행" style="width: 120px; height: 65px; object-fit: contain;">
                                대구은행
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="busan" style="display: none;">
                                <img src="../assets/image/BNK.png" alt="부산은행" style="width: 120px; height: 65px; object-fit: contain;">
                                부산은행
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="gwangju" style="display: none;">
                                <img src="../assets/image/KwangjuBank.png" alt="광주은행" style="width: 90px; height: 50px; object-fit: contain;">
                                광주은행
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="jeju" style="display: none;">
                                <img src="../assets/image/JejuBank.png" alt="제주은행" style="width: 90px; height: 50px; object-fit: contain;">
                                제주은행
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="saemaul" style="display: none;">
                                <img src="../assets/image/KoreaFederationofCommunityCreditCooperatives.png" alt="새마을금고" style="width: 120px; height: 65px; object-fit: contain;">
                                새마을금고
                            </button>
                            <button class="payment-method-btn payment-card-more" data-method="shinhyeop" style="display: none;">
                                <img src="../assets/image/SH.png" alt="신협" style="width: 120px; height: 65px; object-fit: contain;">
                                신협
                            </button>
                        </div>
                        <a href="#" class="payment-more-link" id="card-payment-more" onclick="toggleCardPaymentMore(event)">
                            더 보기 <i class="fas fa-chevron-down"></i>
                        </a>
                    </div>
                </div>

                <!-- 오른쪽: 주문 요약 -->
                <div class="payment-summary-container">
                    <div class="payment-summary-item">
                        <div class="payment-summary-label">상품명</div>
                        <div class="payment-summary-value" id="summary-package-name">-</div>
                    </div>
                    <div class="payment-summary-item">
                        <div class="payment-summary-label">결제 금액</div>
                        <div class="payment-summary-amount" id="summary-package-price">-</div>
                    </div>
                    <div style="margin-top: auto; padding-top: 32px;">
                        <div class="terms-box" style="margin-bottom: 20px;">
                            <strong>결제 약관 동의</strong>
                            크레딧 구매 시 <a href="#">이용약관</a> 및 <a href="#">개인정보처리방침</a>에 동의한 것으로 간주됩니다.<br>
                            구매한 크레딧은 환불이 불가능하며, 유효기간 내에 사용해주세요.
                        </div>
                        <div class="terms-agreement" style="margin-bottom: 20px;">
                            <input type="checkbox" id="terms-agree">
                            <label for="terms-agree" style="cursor: pointer;">위 약관에 동의합니다</label>
                        </div>
                        <button class="payment-submit-btn" id="payment-submit-btn" onclick="processPayment()" disabled>결제하기</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 결제 완료 모달 -->
    <div class="payment-success-modal-overlay" id="payment-success-modal-overlay" style="display: none;">
        <div class="payment-success-modal">
            <div class="payment-success-content">
                <div class="payment-success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2>결제가 완료되었습니다</h2>
                <div class="payment-success-info" id="payment-success-info">
                    <div class="success-info-item">
                        <span class="success-info-label">충전 크레딧:</span>
                        <span class="success-info-value" id="success-credit">-</span>
                    </div>
                    <div class="success-info-item">
                        <span class="success-info-label">결제 금액:</span>
                        <span class="success-info-value" id="success-price">-</span>
                    </div>
                    <div class="success-info-item">
                        <span class="success-info-label">보유 크레딧:</span>
                        <span class="success-info-value" id="success-balance">-</span>
                    </div>
                </div>
                <button class="payment-success-btn" onclick="closePaymentSuccessModal()">확인</button>
            </div>
        </div>
    </div>

    <script>
        // 크레딧 패키지 데이터
        // 분량 계산: 기본 자막 생성 기준 (분당 10크레딧)
        const creditPackages = [
            { id: 1, name: '스타터', credit: 500, price: 5000, originalPrice: 5000, bonus: 0, discount: 0, description: '약 50분 분량 처리 가능 (기본 자막 생성 기준)' },
            { id: 2, name: '프로', credit: 1000, price: 8000, originalPrice: 10000, bonus: 0, discount: 20, description: '약 100분 분량 처리 가능 (기본 자막 생성 기준)' },
            { id: 3, name: '프리미엄', credit: 5000, price: 35000, originalPrice: 50000, bonus: 0, discount: 30, description: '약 500분 분량 처리 가능 (기본 자막 생성 기준)', popular: true, badge: '인기' }
        ];

        let selectedPackage = null;

        // 크레딧 잔액 로드
        function loadCreditBalance() {
            const creditBalance = parseInt(localStorage.getItem('creditBalance') || '0');
            const monthlyUsage = parseInt(localStorage.getItem('monthlyUsage') || '0');
            const totalCharged = parseInt(localStorage.getItem('totalCharged') || '0');

            document.getElementById('credit-balance').textContent = creditBalance.toLocaleString();
            document.getElementById('monthly-usage').textContent = monthlyUsage.toLocaleString() + ' 크레딧';
            document.getElementById('total-charged').textContent = totalCharged.toLocaleString() + ' 크레딧';
        }

        // 크레딧 패키지 렌더링
        function renderCreditPackages() {
            const container = document.getElementById('credit-packages');
            container.innerHTML = creditPackages.map(pkg => {
                // 분량 숫자만 강조 (50/100/500만 bold, 나머지는 회색 작은 크기)
                const descriptionHtml = pkg.description ? 
                    pkg.description.replace(/(\d+)분/, '<span class="duration-number">$1</span>분') : '';
                
                // 배지 표시 (할인 배지: 왼쪽, 인기 배지: 오른쪽)
                let badgeHtml = '';
                if (pkg.discount > 0) {
                    badgeHtml += `<div class="pricing-card-badge">${pkg.discount}% 할인</div>`;
                }
                if (pkg.badge) {
                    badgeHtml += `<div class="pricing-card-badge popular">${pkg.badge}</div>`;
                }
                
                // 가격 HTML (할인 정보 명확하게 표시)
                let priceHtml = '';
                if (pkg.discount > 0 && pkg.originalPrice > pkg.price) {
                    priceHtml = `
                        <div class="pricing-card-price">
                            <div class="pricing-card-price-row">
                                <span class="pricing-card-original-price">${pkg.originalPrice.toLocaleString()}<span class="price-unit">원</span></span>
                                <span class="pricing-card-discounted-price">${pkg.price.toLocaleString()}<span class="price-unit">원</span></span>
                            </div>
                        </div>
                    `;
                } else {
                    priceHtml = `
                        <div class="pricing-card-price">
                            <div class="pricing-card-price-row">
                                <span class="pricing-card-discounted-price">${pkg.price.toLocaleString()}<span class="price-unit">원</span></span>
                            </div>
                        </div>
                    `;
                }
                
                // 버튼 (모두 동일하게 "충전하기", 5,000만 색 진하게)
                const buttonText = '충전하기';
                
                return `
                <div class="pricing-card ${pkg.popular ? 'popular' : ''}">
                    ${badgeHtml}
                    ${descriptionHtml ? `<div class="pricing-card-description">${descriptionHtml}</div>` : ''}
                    <div class="pricing-card-credit">
                        ${(pkg.credit + pkg.bonus).toLocaleString()}
                        <span class="credit-unit">크레딧</span>
                    </div>
                    ${priceHtml}
                    ${pkg.bonus > 0 ? `<div class="pricing-card-bonus">보너스 ${pkg.bonus.toLocaleString()} 크레딧</div>` : ''}
                    <button class="pricing-card-button" onclick="selectPackage(${pkg.id})">${buttonText}</button>
                </div>
            `;
            }).join('');
        }

        // 패키지 선택
        function selectPackage(packageId) {
            // 로그인 상태 확인
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                // 비로그인 상태: 로그인 유도
                const isInHtmlFolder = window.location.pathname.includes('/html/');
                const loginPath = isInHtmlFolder ? 'login.html' : 'html/login.html';
                
                if (confirm('크레딧을 충전하려면 로그인이 필요합니다.\n로그인 페이지로 이동하시겠습니까?')) {
                    window.location.href = loginPath;
                }
                return;
            }
            
            selectedPackage = creditPackages.find(pkg => pkg.id === packageId);
            if (!selectedPackage) return;

            // 주문 요약 업데이트
            document.getElementById('summary-package-name').textContent = `${(selectedPackage.credit + selectedPackage.bonus).toLocaleString()} 크레딧`;
            document.getElementById('summary-package-price').textContent = `${selectedPackage.price.toLocaleString()}원`;

            // 결제 방법 선택 초기화
            const paymentMethods = document.querySelectorAll('.payment-method-btn');
            paymentMethods.forEach(btn => btn.classList.remove('active'));

            // 약관 동의 체크박스 초기화
            const termsCheckbox = document.getElementById('terms-agree');
            termsCheckbox.checked = false;

            // 결제 버튼 상태 확인
            checkPaymentButtonState();

            // 상단바 숨기기
            document.body.classList.add('payment-modal-open');
            const navPlaceholder = document.getElementById('nav-placeholder');
            const glassNav = document.querySelector('.glass-nav');
            if (navPlaceholder) {
                navPlaceholder.style.display = 'none';
            }
            if (glassNav) {
                glassNav.style.display = 'none';
            }

            document.getElementById('payment-modal-overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // 결제 모달 닫기
        function closePaymentModal() {
            document.getElementById('payment-modal-overlay').classList.remove('active');
            document.body.style.overflow = '';
            document.body.classList.remove('payment-modal-open');
            selectedPackage = null;
            
            // 상단바 다시 표시
            const navPlaceholder = document.getElementById('nav-placeholder');
            const glassNav = document.querySelector('.glass-nav');
            if (navPlaceholder) {
                navPlaceholder.style.display = '';
            }
            if (glassNav) {
                glassNav.style.display = '';
            }
        }

        // 간편결제 더보기 토글
        function toggleEasyPaymentMore(event) {
            event.preventDefault();
            const moreLink = document.getElementById('easy-payment-more');
            const moreItems = document.querySelectorAll('.payment-method-more');
            const isExpanded = moreLink.getAttribute('data-expanded') === 'true';

            if (isExpanded) {
                // 접기
                moreItems.forEach(item => {
                    item.style.display = 'none';
                });
                moreLink.innerHTML = '더 보기 <i class="fas fa-chevron-down"></i>';
                moreLink.setAttribute('data-expanded', 'false');
            } else {
                // 더보기
                moreItems.forEach(item => {
                    item.style.display = 'flex';
                });
                moreLink.innerHTML = '접기 <i class="fas fa-chevron-up"></i>';
                moreLink.setAttribute('data-expanded', 'true');
            }
        }

        // 신용·체크카드 더보기 토글
        function toggleCardPaymentMore(event) {
            event.preventDefault();
            const moreLink = document.getElementById('card-payment-more');
            const moreItems = document.querySelectorAll('.payment-card-more');
            const isExpanded = moreLink.getAttribute('data-expanded') === 'true';

            if (isExpanded) {
                // 접기
                moreItems.forEach(item => {
                    item.style.display = 'none';
                });
                moreLink.innerHTML = '더 보기 <i class="fas fa-chevron-down"></i>';
                moreLink.setAttribute('data-expanded', 'false');
            } else {
                // 더보기
                moreItems.forEach(item => {
                    item.style.display = 'flex';
                });
                moreLink.innerHTML = '접기 <i class="fas fa-chevron-up"></i>';
                moreLink.setAttribute('data-expanded', 'true');
            }
        }

        // 결제 버튼 활성화 상태 확인
        function checkPaymentButtonState() {
            const paymentMethods = document.querySelectorAll('.payment-method-btn');
            const termsCheckbox = document.getElementById('terms-agree');
            const submitBtn = document.getElementById('payment-submit-btn');
            
            const isPaymentMethodSelected = Array.from(paymentMethods).some(btn => btn.classList.contains('active'));
            const isTermsAgreed = termsCheckbox.checked;
            
            submitBtn.disabled = !(isPaymentMethodSelected && isTermsAgreed);
        }

        // 결제 수단 선택
        // URL 파라미터에서 패키지 ID 읽기
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        document.addEventListener('DOMContentLoaded', function() {
            const paymentMethods = document.querySelectorAll('.payment-method-btn');
            paymentMethods.forEach(btn => {
                btn.addEventListener('click', function() {
                    paymentMethods.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    checkPaymentButtonState();
                });
            });

            // 약관 동의 체크박스
            const termsCheckbox = document.getElementById('terms-agree');
            
            termsCheckbox.addEventListener('change', function() {
                checkPaymentButtonState();
            });

            // 모달 외부 클릭 시 닫기
            document.getElementById('payment-modal-overlay').addEventListener('click', function(e) {
                if (e.target === this) {
                    closePaymentModal();
                }
            });

            // 결제 완료 모달 외부 클릭 시 닫기
            document.getElementById('payment-success-modal-overlay').addEventListener('click', function(e) {
                if (e.target === this) {
                    closePaymentSuccessModal();
                }
            });

            // 크레딧 패키지 렌더링
            renderCreditPackages();
            loadCreditBalance();

            // URL 파라미터에서 패키지 ID 읽어서 자동 선택
            const packageIdParam = getUrlParameter('packageId');
            if (packageIdParam) {
                const packageId = parseInt(packageIdParam);
                if (packageId && creditPackages.find(pkg => pkg.id === packageId)) {
                    // 패키지 선택 (약간의 지연을 두어 렌더링 완료 후 실행)
                    setTimeout(() => {
                        selectPackage(packageId);
                    }, 100);
                }
            }
        });

        // 결제 처리
        function processPayment() {
            if (!selectedPackage) return;

            // 결제 방법 선택 확인
            const paymentMethods = document.querySelectorAll('.payment-method-btn');
            const isPaymentMethodSelected = Array.from(paymentMethods).some(btn => btn.classList.contains('active'));
            if (!isPaymentMethodSelected) {
                alert('결제 방법을 선택해주세요.');
                return;
            }

            // 약관 동의 확인
            const termsCheckbox = document.getElementById('terms-agree');
            if (!termsCheckbox.checked) {
                alert('약관에 동의해주세요.');
                return;
            }

            // 크레딧 충전
            const currentBalance = parseInt(localStorage.getItem('creditBalance') || '0');
            const newBalance = currentBalance + selectedPackage.credit + selectedPackage.bonus;
            localStorage.setItem('creditBalance', newBalance.toString());

            // 총 충전 금액 업데이트
            const totalCharged = parseInt(localStorage.getItem('totalCharged') || '0');
            localStorage.setItem('totalCharged', (totalCharged + selectedPackage.credit + selectedPackage.bonus).toString());

            // 사용 내역 추가
            const creditHistory = JSON.parse(localStorage.getItem('creditHistory') || '[]');
            creditHistory.unshift({
                date: new Date().toISOString(),
                type: 'charge',
                description: `크레딧 충전`,
                amount: selectedPackage.credit + selectedPackage.bonus,
                balance: newBalance
            });
            localStorage.setItem('creditHistory', JSON.stringify(creditHistory));
            
            // 무료 크레딧 정보 업데이트
            if (typeof updateFreeCreditInfo === 'function') {
                updateFreeCreditInfo();
            }

            // 결제 내역 저장
            const paymentMethod = document.querySelector('.payment-method-btn.active')?.textContent.trim() || '신용카드';
            const paymentHistory = JSON.parse(localStorage.getItem('paymentHistory') || '[]');
            paymentHistory.unshift({
                type: 'credit',
                credit: selectedPackage.credit + selectedPackage.bonus,
                price: selectedPackage.price,
                paymentDate: new Date().toISOString(),
                paymentMethod: paymentMethod
            });
            localStorage.setItem('paymentHistory', JSON.stringify(paymentHistory));

            // 결제 완료 모달 표시
            showPaymentSuccessModal(selectedPackage, newBalance);
            
            // 결제 모달 닫기
            closePaymentModal();
            loadCreditBalance();
        }

        // 결제 완료 모달 표시
        function showPaymentSuccessModal(package, balance) {
            const modal = document.getElementById('payment-success-modal-overlay');
            const creditElement = document.getElementById('success-credit');
            const priceElement = document.getElementById('success-price');
            const balanceElement = document.getElementById('success-balance');

            creditElement.textContent = (package.credit + package.bonus).toLocaleString() + ' 크레딧';
            priceElement.textContent = package.price.toLocaleString() + '원';
            balanceElement.textContent = balance.toLocaleString() + ' 크레딧';

            modal.style.display = 'flex';
            setTimeout(() => {
                modal.classList.add('active');
            }, 10);
        }

        // 결제 완료 모달 닫기
        function closePaymentSuccessModal() {
            const modal = document.getElementById('payment-success-modal-overlay');
            modal.classList.remove('active');
            setTimeout(() => {
                modal.style.display = 'none';
                // 페이지 새로고침
                window.location.reload();
            }, 300);
        }
    </script>
    <script src="../js/i18n.js" defer></script>
    <script src="../js/nav-bar.js" defer></script>
    <script src="../js/auth-state.js" defer></script>
    <script src="../script.js" defer></script>
</body>
</html>
